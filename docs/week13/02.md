### 2-1 使用@Validated注解进行基础参数校验

- 控制器上添加注解 `@Validated`
- 在普通参数上添加 `@Max`

```
@RestController
@RequestMapping("/banner")
@Validated
public class BannerController {

    @PostMapping("/test/{id}")
    public PersonDTO test5(@PathVariable @Max(value = 10,message = "不能大于10") Integer id,
                        @RequestParam String name,
                        @RequestBody PersonDTO person){
        PersonDTO dto = PersonDTO.builder()
                .name(person.getName())
                .age(person.getAge())
                .build();
        return dto;
    }
}
```

`@Range`

```
@Range(min=1,max=10,message="xxx")
```

### 2-2 验证HTTP Body中的参数与级联校验

> 对定义的DTO 进行校验

PersonDTO.java

```
@Builder
@Getter
public class PersonDTO {
    @Length(min=2,max=10,message = "xxx")
    private String name;
    private Integer age;
}

``` 

BannerController.java

- 在 自定义的 DTO参数上 添加注解 `@Validated` 否则不生效

```
@RestController
@RequestMapping("/banner")
@Validated
public class BannerController {

    @PostMapping("/test/{id}")
    public PersonDTO test5(@PathVariable @Range(min = 1,max= 10,message = "不能大于10小于1") Integer id,
                        @RequestParam String name,
                        @RequestBody @Validated PersonDTO person){
        PersonDTO dto = PersonDTO.builder()
                .name(person.getName())
                .age(person.getAge())
                .build();
        return dto;
    }

}
```

> 如果 PersonDTO 里面有 SchoolDTO 该如何校验

- 级联效果

SchoolDTO.java

```
@Getter
@Setter
public class SchoolDTO {
    @Length(min=2)
    private String schoolName;
}
```

PersonDTO.java

**@Valid 才能有及联效果**

```
@Builder
@Getter
public class PersonDTO {
    @Length(min=2,max=10,message = "xxx")
    private String name;
    private Integer age;

    @Valid
    private SchoolDTO schoolDTO;
}
```

此时访问 body体里内容为`{"name":"abc","age":18,"schoolDTO":{"schoolName":"q"}}` 会校验失败