### 3-6 多对多关系配置@ManyToMany

Theme.java

```
@Entity
public class Theme {
    @Id
    private Long id;
    private String title;
    private String name;

    // 导航属性
    @ManyToMany
    private List<Spu> spuList;
}
```

Spu.java

```
@Entity
public class Spu {
    @Id
    private Long id;
    private String title;
    private String subtitle;

    // 导航属性
    @ManyToMany
    private List<Theme> themeList;
}
```

> 查看生成的表是什么样子的

结果生成四张表

```
spu / theme 不说了
spu_theme_list(spu_id,theme_list_id)
theme_spu_list(theme_id,spu_list_id)
```

**因为这是双向多对多**

### 3-7 单向多对多关系配置与常见问题

Spu.java

```
@Entity
public class Spu {
    @Id
    private Long id;
    private String title;
    private String subtitle;
}
```

Theme.java

```
@Entity
public class Theme {
    @Id
    private Long id;
    private String title;
    private String name;

    // 导航属性
    @ManyToMany
    private List<Spu> spuList;
}
```

> 此时生成三个表

```
spu
theme
theme_spu_list(theme_id,spu_list_id)  关系表
```

- 我们不想要生成的关系表叫做 theme_spu_list 而是 theme_spu 才对
- 而且 theme_spu_list 里的字段 spu_list_id 应该是 spu_id 才对

> 指定表名,和外键的名称

```
@Entity
public class Theme {
    @Id
    private Long id;
    private String title;
    private String name;

    // 导航属性
    @ManyToMany
    @JoinTable(name="theme_spu",joinColumns = @JoinColumn(name = "theme_id"),
    inverseJoinColumns = @JoinColumn(name="spu_id"))
    private List<Spu> spuList;
}
```

这样生成的关系表就是 `theme_spu(theme_id,spu_id)`

