### 3-1 JPA的Repository定义

> 仓储

- 定义一个接口 BannerRepository

```
@Repository
public interface BannerRepository extends JpaRepository<Banner, Long> {
    /*
    继承 JpaRepository<Banner, Long>
    第一个参数是 操作的实体类
    第二个参数是 实体类的主键
    */

    Banner findOneById(Long id);

    Banner findOneByName(String name);
}
```

> JPA强大之处在于

定义了 BannerRepository 之后，就可以不写任何实现了

直接调用 findOneById 自动就会生成sql语句。


### 3-2 执行Repository查询语句

- ddl-application.yml 里`ddl-auto: update`
- 数据库录入两条数据
    ```
    banner 表
        id 1
        img 2 
        name 3
        title 5
        
    banner_item表
        id 1
        banner_id 1 
        img 1
        keyword 2
        name 3 
        type 4
    ```

- 修改 BannerService.java

```
public interface BannerService {
    Banner getByName(String name);
}
```

- BannerServiceImpl.java

```
public class BannerServiceImpl implements BannerService {
    @Autowired
    private BannerRepository bannerRepository;

    public Banner getByName(String name){
        return bannerRepository.findOneByName(name);
    }
}
```

- BannerController.java 里调用 

```
@RestController
@RequestMapping("/banner")
@Validated
public class BannerController {

    @Autowired
    private BannerService bannerService;

    @GetMapping("/name/{name}")
    public Banner getByName(@PathVariable @NotBlank String name){
        // 此行断点  http://localhost:8080/v1/banner/name/3
        Banner banner = bannerService.getByName(name);
        return banner;
    }
}
```

- 此时debug运行 请求http://localhost:8080/v1/banner/name/3
- 就会看到 banner 里的内容被查询出来了